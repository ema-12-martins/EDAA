    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Clothing Recommendations</title>
        <style>
            body { font-family: Arial, sans-serif; padding: 10px; }
            .grid-container {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 10px;
            }
            .grid-item {
                position: relative;
                padding-top: 100%;
                cursor: pointer;
                overflow: hidden;
                border-radius: 10px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            }
            .grid-item img {
                position: absolute;
                top: 0; left: 0;
                width: 100%; height: 100%;
                object-fit: cover;
            }
            .modal {
                display: none; position: fixed; left: 0; top: 0;
                width: 100%; height: 100%; background: rgba(0,0,0,0.6);
                justify-content: center; align-items: center; z-index: 999;
            }
            .modal-content {
                background: white; padding: 20px; border-radius: 10px; text-align: center;
                max-width: 700px; width: 80%;
            }
            .modal img.large-image {
                width: 50%; border-radius: 10px;
            }
            .recommendations {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
                margin-top: 15px;
                padding: 10px;
                max-width: 100%;
                overflow-x: auto;
                box-sizing: border-box;
            }
            .recommendations img {
                width: 100px; height: 100px; border-radius: 8px; object-fit: cover;
                box-shadow: 0 1px 4px rgba(0,0,0,0.2);
            }
            .close { position: absolute; top: 15px; right: 25px; color: white; font-size: 30px; cursor: pointer; }
        </style>
    </head>
    <body>
        <div class="grid-container">
            {% for image in images %}
            <div class="grid-item" data-image="{{ image }}">
                <img src="{{ url_for('static', filename='images/' + image) }}" alt="Clothing item">
            </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        <div style="text-align:center; margin-top:20px;">
            {% if page > 1 %}
                <a href="{{ url_for('clothing', page=page-1) }}">Previous</a>
            {% endif %}

            Page {{ page }} of {{ total_pages }}

            {% if page < total_pages %}
                <a href="{{ url_for('clothing', page=page+1) }}">Next</a>
            {% endif %}
        </div>

        <div class="modal" id="modal">
            <span class="close" id="close">&times;</span>
            <div class="modal-content">
                <img class="large-image" id="largeImage" src="">
                <div class="recommendations" id="recommendations"></div>
            </div>
        </div>

        <script>
            const modal = document.getElementById('modal');
            const largeImage = document.getElementById('largeImage');
            const recommendationsDiv = document.getElementById('recommendations');
            const closeBtn = document.getElementById('close');

            document.querySelectorAll('.grid-item').forEach(item => {
                item.onclick = () => {
                    const image = item.getAttribute('data-image');
                    largeImage.src = `/static/images/${image}`;
                    fetchRecommendations(image);
                    modal.style.display = 'flex';
                };
            });

            closeBtn.onclick = () => { modal.style.display = 'none'; };
            window.onclick = (event) => { if (event.target == modal) modal.style.display = 'none'; };

            function fetchRecommendations(image) {
                fetch(`/recommendations/${image}`)
                    .then(res => res.json())
                    .then(products => {
                        const recommendationsDiv = document.getElementById('recommendations');
                        recommendationsDiv.innerHTML = '';
                        products.forEach(prod => {
                            const imgElem = document.createElement('img');
                            imgElem.src = `/static/images/${prod}`;
                            imgElem.alt = prod;
                            imgElem.style.cursor = 'pointer';

                            // Optional: allow clicking a recommended image to view it big
                            imgElem.addEventListener('click', () => {
                                document.getElementById('largeImage').src = `/static/images/${prod}`;
                                fetchRecommendations(prod);
                            });

                            recommendationsDiv.appendChild(imgElem);
                        });
                });
            }
        </script>
    </body>
    </html
